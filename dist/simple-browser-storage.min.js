!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.simpleBrowserStorage=t():e.simpleBrowserStorage=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),i=n(o),a=r(2),u=n(a),c=function(){try{var e="test";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}();t["default"]=function(e){return c?new i["default"](e):new u["default"](e)},e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(4),a=function(){function e(t){n(this,e);var r=t||{};this.name=r.name||"SimpleBrowserStorage",this._expiresTime=r.expiresTime||10;var o=this.stateIsExpired()?{}:this.getState();o.expires=(0,i.addMinutes)(new Date,this._expiresTime),this.updateState(o)}return o(e,[{key:"setState",value:function(e){if("object"!=typeof e)throw new i.UserExpection("You can add only objects to state!");var t=this.getState()||{},r=(0,i.extend)(t,e);this.updateState(r)}},{key:"updateState",value:function(e){return e&&!e.expires&&(e.expires=(0,i.addMinutes)(new Date,this._expiresTime)),e}},{key:"stateIsExpired",value:function(){var e=this.getState()||{};if(!e.expires)return!0;var t=(0,i.dateToMins)(e.expires),r=(0,i.dateToMins)()>t;return r}},{key:"expiresTime",get:function(){return this._expiresTime}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var c=u.get;return void 0===c?void 0:c.call(a)}var s=Object.getPrototypeOf(o);if(null===s)return void 0;e=s,t=i,r=a,n=!0,u=s=void 0}},c=r(1),s=n(c),f=function(e){var t=new Date,r=60*e*1e3;return t.setTime(t.getTime()+r),t.toUTCString()},l=function(e){function t(e){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.storeType="cacheStorage"}return i(t,e),a(t,[{key:"updateState",value:function(e){var r=u(Object.getPrototypeOf(t.prototype),"updateState",this).call(this,e),n="expires="+f(this.expiresTime),o=[this.name,"=",escape(JSON.stringify(r)),";",n].join("");document.cookie=o}},{key:"getState",value:function(){var e=document.cookie.match(new RegExp(this.name+"=([^;]+)"));return e?JSON.parse(unescape(e[1])):e}}]),t}(s["default"]);t["default"]=l,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var c=u.get;return void 0===c?void 0:c.call(a)}var s=Object.getPrototypeOf(o);if(null===s)return void 0;e=s,t=i,r=a,n=!0,u=s=void 0}},c=r(1),s=n(c),f=function(e){function t(e){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.storeType="localStorage"}return i(t,e),a(t,[{key:"updateState",value:function(e){var r=u(Object.getPrototypeOf(t.prototype),"updateState",this).call(this,e);localStorage.setItem(this.name,JSON.stringify(r))}},{key:"getState",value:function(){return JSON.parse(localStorage.getItem(this.name))}}]),t}(s["default"]);t["default"]=f,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return{message:e,name:"UserExpection"}},n=function(e){var t=e?new Date(e):new Date;return t.getTime()/60/1e3},o=function(e,t){return new Date(e.getTime()+6e4*t)},i=function(e,t){var r=void 0,n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n};t["default"]={UserExpection:r,dateToMins:n,addMinutes:o,extend:i},e.exports=t["default"]}])});